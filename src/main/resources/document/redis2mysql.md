## redis&mysql

redis有没有用过，常用的数据结构以及在业务中使用的场景，redis的hash怎么实现的，rehash过程讲一下和JavaHashMap的rehash有什么区别？redis cluster有没有了解过，怎么做到高可用的？redis的持久化机制，为啥不能用redis做专门的持久化数据库存储？

<br>
不同的是，Redis的字典只能是字符串，另外他们rehash的方式不一样，因为Java的HashMap的字典很大时，rehash是个耗时的操作，需要一次全部rehash。Redis为了追求高性能，不能堵塞服务，所以采用了渐进式rehash策略。
<br>
渐进式rehash会在rehash的同时，保留新旧两个hash结构，如下图所示，查询时会同时查询两个hash结构，然后在后续的定时任务以及hash操作指令中，循环渐进地将旧hash的内容一点点地迁到新的hash结构中。当搬迁完成了，就会使用新的hash结构取而代之。当hash移除最后一个元素后，该数据结构自动删除，内存被回收。
<br>

不提供"关系"，需要自己维护"关系"，非常非常非常麻烦，可与第二点联系；
不支持事务(ACID)，MULTI/EXEC/WATCH不算；
异步持久化，丢数据，改同步性能就没有了；
异步复制，丢数据，WAIT性能就没了，还是会丢；


<br>

没有银弹，特别是在存储领域，我们总是在空间时间上取舍，在CAP上取舍，redis正是内存数据库，以此换取查询速度，在可靠性，事务性，以及空间利用率上有所取舍！

### 雪崩


### 穿透


### 击穿

